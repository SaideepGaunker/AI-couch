<!DOCTYPE html>
<html lang="en" ng-app="interviewPrepApp">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Role Selector Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="src/components/role-selector/role-selector.styles.css">
</head>
<body ng-controller="TestController as vm">
    <div class="container mt-4">
        <h2>Role Selector Component Test</h2>
        <div class="card">
            <div class="card-body">
                <role-selector 
                    selected-role="vm.selectedRole"
                    on-role-change="vm.onRoleChange(role)"
                    required="true"
                    show-tech-stack="true">
                </role-selector>
                
                <div class="mt-3" ng-if="vm.selectedRole">
                    <h5>Selected Role Data:</h5>
                    <pre>{{ vm.selectedRole | json }}</pre>
                </div>
                
                <hr class="my-4">
                
                <div class="mt-4">
                    <h5>Question Count Selection</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Number of Questions</label>
                                <select class="form-select" ng-model="vm.questionCount">
                                    <option value="3">3 questions</option>
                                    <option value="5">5 questions</option>
                                    <option value="7">7 questions</option>
                                    <option value="10">10 questions</option>
                                </select>
                            </div>
                            
                            <div class="mb-3">
                                <button class="btn btn-primary" ng-click="vm.applyQuestionCount()">Apply</button>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="alert alert-info" ng-if="vm.questionDistribution">
                                <h6>Question Distribution:</h6>
                                <p class="mb-0">{{vm.questionDistribution}}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.3/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.3/angular-route.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.3/angular-animate.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.3/angular-sanitize.min.js"></script>

    <!-- App Scripts -->
    <script src="src/js/app.js"></script>
    <script src="src/components/role-selector/role-selector.component.js"></script>

    <script>
        angular.module('interviewPrepApp')
            .controller('TestController', function() {
                var vm = this;
                vm.selectedRole = null;
                vm.questionCount = '3'; // Default to 3 questions
                vm.questionDistribution = 'Theory: 1, Coding: 1, Aptitude: 1'; // Default distribution
                
                vm.onRoleChange = function(role) {
                    console.log('Role changed:', role);
                    vm.selectedRole = role;
                };
                
                vm.applyQuestionCount = function() {
                    // Update distribution based on selected question count
                    var count = parseInt(vm.questionCount);
                    
                    if (count === 3) {
                        vm.questionDistribution = 'Theory: 1, Coding: 1, Aptitude: 1';
                    } else if (count === 5) {
                        vm.questionDistribution = 'Theory: 1, Coding: 2, Aptitude: 2';
                    } else if (count === 7) {
                        vm.questionDistribution = 'Theory: 1, Coding: 3, Aptitude: 3';
                    } else if (count === 10) {
                        vm.questionDistribution = 'Theory: 2, Coding: 4, Aptitude: 4';
                    }
                    
                    console.log('Applied question count:', count);
                    console.log('Updated distribution:', vm.questionDistribution);
                };
            });
    </script>
</body>
</html>